<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FC 26 Mini - 5v5</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: sans-serif; }
        #ui { position: absolute; top: 20px; width: 100%; text-align: center; color: white; pointer-events: none; text-shadow: 2px 2px 4px #000; }
        #timer { font-size: 24px; }
        #score { font-size: 48px; font-weight: bold; }
    </style>
</head>
<body>
    <div id="ui">
        <div id="score">BLUE 0 - 0 RED</div>
        <div id="timer">03:00</div>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // --- Game Setup ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x87CEEB); // Sky blue
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const clock = new THREE.Clock();
        let timeLeft = 180;
        let score = { blue: 0, red: 0 };

        // --- Lighting ---
        const sun = new THREE.DirectionalLight(0xffffff, 1);
        sun.position.set(5, 10, 7.5);
        scene.add(sun);
        scene.add(new THREE.AmbientLight(0x404040));

        // --- Pitch ---
        const pitchGeo = new THREE.PlaneGeometry(60, 40);
        const pitchMat = new THREE.MeshPhongMaterial({ color: 0x2e7d32 });
        const pitch = new THREE.Mesh(pitchGeo, pitchMat);
        pitch.rotation.x = -Math.PI / 2;
        scene.add(pitch);

        // --- Ball ---
        const ballGeo = new THREE.SphereGeometry(0.4, 16, 16);
        const ballMat = new THREE.MeshPhongMaterial({ color: 0xffffff });
        const ball = new THREE.Mesh(ballGeo, ballMat);
        ball.position.y = 0.4;
        scene.add(ball);
        let ballVel = new THREE.Vector3();

        // --- Players ---
        const players = [];
        const createPlayer = (team, pos) => {
            const group = new THREE.Group();
            const body = new THREE.Mesh(new THREE.CapsuleGeometry(0.3, 0.7, 4, 8), new THREE.MeshPhongMaterial({ color: team }));
            body.position.y = 0.5;
            group.add(body);
            group.position.set(pos.x, 0, pos.z);
            scene.add(group);
            return { mesh: group, team: team, vel: new THREE.Vector3() };
        };

        // Spawn 5v5
        for(let i=0; i<5; i++) {
            players.push(createPlayer(0x0000ff, { x: -10 - (i*2), z: (i-2)*5 })); // Blue
            players.push(createPlayer(0xff0000, { x: 10 + (i*2), z: (i-2)*5 }));  // Red
        }

        camera.position.set(0, 25, 25);
        camera.lookAt(0, 0, 0);

        // --- Basic Logic ---
        function update() {
            const dt = clock.getDelta();
            
            // Ball Physics
            ball.position.add(ballVel);
            ballVel.multiplyScalar(0.98); // Friction

            players.forEach(p => {
                // Simple AI: Move toward ball
                const dir = new THREE.Vector3().subVectors(ball.position, p.mesh.position).normalize();
                p.mesh.position.add(dir.multiplyScalar(0.1));
                
                // Kick ball if close
                if(p.mesh.position.distanceTo(ball.position) < 1.2) {
                    const kickDir = new THREE.Vector3(p.team === 0x0000ff ? 1 : -1, 0, (Math.random()-0.5)).normalize();
                    ballVel.copy(kickDir.multiplyScalar(0.5));
                }
            });

            // Boundary & Goal Check
            if(Math.abs(ball.position.x) > 30) {
                if(ball.position.x > 0) score.blue++; else score.red++;
                document.getElementById('score').innerText = `BLUE ${score.blue} - ${score.red} RED`;
                ball.position.set(0, 0.4, 0);
                ballVel.set(0,0,0);
            }
            if(Math.abs(ball.position.z) > 20) ballVel.z *= -1;

            // Timer
            if(timeLeft > 0) {
                timeLeft -= dt;
                const mins = Math.floor(timeLeft/60);
                const secs = Math.floor(timeLeft%60);
                document.getElementById('timer').innerText = `${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            update();
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
